<div class="fee-allocation-form-container">
  <h2 mat-dialog-title>Add Fee Allocation</h2>
  
  <mat-dialog-content>
    <form [formGroup]="allocationForm">
      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Fee Category *</mat-label>
          <mat-select formControlName="feeCategoryId">
            <mat-option *ngFor="let category of feeCategories" [value]="category.id">
              {{ category.categoryName }} ({{ category.categoryType }})
            </mat-option>
          </mat-select>
          <mat-error *ngIf="f['feeCategoryId'].hasError('required')">
            Fee category is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Fee Amount *</mat-label>
          <input matInput type="number" formControlName="feeAmount" placeholder="0.00" step="0.01">
          <span matPrefix>â‚¹&nbsp;</span>
          <mat-error *ngIf="f['feeAmount'].hasError('required')">
            Fee amount is required
          </mat-error>
          <mat-error *ngIf="f['feeAmount'].hasError('min')">
            Amount must be greater than 0
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Default Due Date</mat-label>
          <input matInput [matDatepicker]="dueDatePicker" formControlName="dueDate">
          <mat-datepicker-toggle matSuffix [for]="dueDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #dueDatePicker></mat-datepicker>
          <mat-hint>Optional default due date</mat-hint>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Remarks</mat-label>
          <textarea matInput formControlName="remarks" 
                    rows="3" 
                    placeholder="Additional notes about this fee allocation"></textarea>
          <mat-error *ngIf="f['remarks'].hasError('maxlength')">
            Maximum 500 characters allowed
          </mat-error>
        </mat-form-field>
      </div>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-raised-button type="button" (click)="onCancel()" [disabled]="loading">
      Cancel
    </button>
    <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="loading || allocationForm.invalid">
      <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
      <span *ngIf="!loading">Create</span>
    </button>
  </mat-dialog-actions>
</div>
